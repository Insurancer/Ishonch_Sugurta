var progress;function closeModal(){    $("#modalMain").hide();clearClock();}function setModalSetings(height,width){    $("#modalFrm").css('visibility','hidden');    var winHeight=$(window).height();    var winWeight=$(window).width();    if((height==0)||(height>=winHeight)){height=winHeight-80;}    if((width==0)||(width>=winWeight)){width=winWeight-80;}    $("#modalMain").width(width).height(height);    $("#modalMain").css({top:10,left:(winWeight-width)/2,position:'absolute'});    $("#modalFrm").width(width).height(height-$("#modalTytle").height()-1);}function showModal(){    $("#modalMain").show();    $('#modalFrm').on("load",function(){$("#waitIcon").hide(); clearClock(); $("#modalFrm").css('visibility','visible');});}function openModal2(height,width,target,subOperation,rowid,type,elType){    $("#type").val(type);    $("#elementType").val(elType);    openModal(height,width,target,subOperation,rowid);}function openModal(height,width,target,subOperation,rowid){    setModalSetings(height,width);    $("#rowid").val(rowid);    $("#SubOperation").val(subOperation);    $("#ListFrm").prop("target",target);     $("#ListFrm").submit();    showModal();    }function openAjaxModal(height,width,operation2,noItemInclude,element,bkf){    setModalSetings(height,width);    $("#Operation2").val(operation2);    $("#noItemInclude").val(noItemInclude);    for(var i=0;i<5;i++){$("#getFieldName"+(i+1)).val('');} $("#callBFucnc").val('');    for(var i=0;i<element.length;i++){$("#getFieldName"+(i+1)).val(element[i]);}    $("#callBFucnc").val(bkf);        $("#AjaxForm").submit();    showModal();}function openInnerModal(height,width,innerOperation,innerSubOperstion ){    setModalSetings(height,width);    $("#innerOperation").val(innerOperation);    $("#innerSubOperstion").val(innerSubOperstion);    $("#innerForm").submit();    showModal();}function navigate(subOperation,start){    $("#SubOperation").val(subOperation);    $("#start").val(start);    $("#ListFrm").prop("target","");    $("#ListFrm").submit();}function filling(opr){    $('#ClimerForm').val(2);    OsgoAgreement(13);    if(opr==1){    $('input[name="Climer"]').val('ООО Микрокредитная организация FORTUNA BIZNES');    $('input[name="Adress"]').val('Ферганская область, г. Фергана, ул. Б.Маргилоний, дом 12');    $('input[name="Inn"]').val('303863499');    $('input[name="Account"]').val('20216000900602139001');    $('input[name="Bank"]').val('855');    $('input[name="BankName"]').val('HAMKORBANK Истиқбол филиали');    }else if(opr==2){    $('input[name="Climer"]').val('ООО Микрокредитная организация VODIY TARAQQIYOT KREDIT');    $('input[name="Adress"]').val('Ферганская область, Бувайдинский район, ССГ Янгикурган, ул. Янгикурган, дом 2');    $('input[name="Inn"]').val('303056949');    $('input[name="Account"]').val('20216000500392072001');    $('input[name="Bank"]').val('898');    $('input[name="BankName"]').val('Капиталбанк Фарғона филиали');    }else if(opr==3){    $('input[name="Climer"]').val('ООО Микрокредитная организация MICROFIN');    $('input[name="Adress"]').val('Ферганская область, г. Фергана, ул. А.Навои, дом 41, кв. 31/32');    $('input[name="Inn"]').val('304463924');    $('input[name="Account"]').val('20216000100697563001');    $('input[name="Bank"]').val('1165');    $('input[name="BankName"]').val('Invest Finance Bank Фарғона вилоят филиали');    }else if(opr==4){    $('input[name="Climer"]').val('ООО Микрокредитная организация HAMROH KREDIT');    $('input[name="Adress"]').val('Ферганская область, Бувайдинский район, ССГ Янгикурган, ул. Боги Эрам');    $('input[name="Inn"]').val('302167748');    $('input[name="Account"]').val('20216000204950970001');    $('input[name="Bank"]').val('1189');    $('input[name="BankName"]').val('Универсал банк Бувайда филиали');    }else if(opr==5){    $('input[name="Climer"]').val('ООО Микрокредитная организация RENESANS');    $('input[name="Adress"]').val('Ташкентская область, Уртачирчикский район, Бектемирcкое шоссе, дом 196');    $('input[name="Inn"]').val('300515648');    $('input[name="Account"]').val('20216000004636656001');    $('input[name="Bank"]').val('736');    $('input[name="BankName"]').val('Универсал банк Тошкент филиали');    } }function getFromTkjByInn(opr){    var sInn='';    var date=null;    var errorCode=null;         if(opr==1){sInn=$("#sInn").val();}    else if(opr==2){sInn=$("#vInn").val();}    else if(opr==3){sInn=$("#Inn").val();}    $.ajax({     type:"POST",     url :'PrivateTkjUpdate',     data:'Operation=3&sInn='+sInn,     dataType:'json',     error:function (xhr,ajaxOptions,thrownError){alert(xhr.status);alert(thrownError);},     success:function(jsonResp){     if(jsonResp!=null){         errorCode=jsonResp.error;         if(errorCode==0){             if(opr==1){                 $('#sCompname').val(jsonResp.result.name);                 $('#sRegCert').val(jsonResp.result.regCertificate);                 $('#sPhone').val(jsonResp.result.phone);                 $('#sEmail').val(jsonResp.result.email);                 $('#sAddress').val(jsonResp.result.address);                 if(jsonResp.result.regCertificateIssueDate.length>0){                 sdata=jsonResp.result.regCertificateIssueDate;                 Syear=sdata.substring(0,4);                 Smonth=sdata.substring(5,7);                 Sday=sdata.substring(8);                 aDate=Sday+"-"+Smonth+"-"+Syear;                 $('#sRegCertDate').val(aDate);                 }             }else if(opr==2){                 $('#vCompname').val(jsonResp.result.name);                 $('#vRegCert').val(jsonResp.result.regCertificate);                 if(jsonResp.result.regCertificateIssueDate.length>0){                 sdata=jsonResp.result.regCertificateIssueDate;                 Syear=sdata.substring(0,4);                 Smonth=sdata.substring(5,7);                 Sday=sdata.substring(8);                 aDate=Sday+"-"+Smonth+"-"+Syear;                 $('#vRegCertDate').val(aDate);                 }             }else if(opr==3){                 $('#Climer').val(jsonResp.result.name);                 $('#sRegCert').val(jsonResp.result.regCertificate);                 $('#Adress').val(jsonResp.result.address);                 $('#Phone').val(jsonResp.result.phone);                 if(jsonResp.result.regCertificateIssueDate.length>0){                 sdata=jsonResp.result.regCertificateIssueDate;                 Syear=sdata.substring(0,4);                 Smonth=sdata.substring(5,7);                 Sday=sdata.substring(8);                 aDate=Sday+"-"+Smonth+"-"+Syear;                $('#sRegCertDate').val(aDate);                }            }        }else{alert(jsonResp.error_message);}    }    }});}function getFromTkjByVehicle(){    var autoRegNum=$("#AutoRegNum").val();    var autoSer=$("#AutoTechPasSer").val();    var autoNum=$("#AutoTechPasNum").val();    var errorCode=null;    $.ajax({     type:"POST",     url :'PrivateTkjUpdate',     data:'Operation=2&autoRegNum='+autoRegNum+'&autoSer='+autoSer+'&autoNum='+autoNum,     dataType:'json',     error:function (xhr,ajaxOptions,thrownError){alert(xhr.status);alert(thrownError);},     success:function(jsonResp){     if(jsonResp!=null){         errorCode=jsonResp.error;         if(errorCode==0){             $('#AutoBody').val(jsonResp.result.bodyNumber);             $('#AutoEngine').val(jsonResp.result.engineNumber);             $('#AutoYear').val(jsonResp.result.issueYear);             if(jsonResp.result.techPassportIssueDate.length>0){             sdata=jsonResp.result.techPassportIssueDate;             Syear=sdata.substring(0,4);             Smonth=sdata.substring(5,7);             Sday=sdata.substring(8,10);             aDate=Sday+"-"+Smonth+"-"+Syear;             $('#AutoTechPasData').val(aDate);             }         }else{alert(jsonResp.error_message);}     }     }     });}function getFromTkjByPasport(opr){var pSer='',pNum='',pngl='';var date=null;var sForm=null;var driverNum=null;var errorCode=null;if(opr==1){// СтраховательpSer=$("#sPasSer").val();pNum=$("#sPasNum").val();pngl=$("#sPasPinfl").val();}else if(opr==2){// ВладелецpSer=$("#vPasSer").val();pNum=$("#vPasNum").val();pngl=$("#vPasPinfl").val();}else if(opr>=3 && opr<=7){// ВодительdriverNum=opr-2;pSer=$("#d"+driverNum+"pser").val();pNum=$("#d"+driverNum+"pnum").val();pngl=$("#d"+driverNum+"pinf").val();}else if(opr==8 || opr==9){// Заявитель VictumpSer=$("#PassportSerial").val();pNum=$("#PassportNumber").val();pngl=$("#PassportPnfl").val();}$.ajax({type:"POST",url :'PrivateTkjUpdate',data:'Operation=1&pSer='+pSer+'&pNum='+pNum+'&pngl='+pngl,dataType:'json',error:function (xhr,ajaxOptions,thrownError){alert(xhr.status);alert(thrownError);},success:function(jsonResp){var sdata='';var Syear='';var Smonth='';var Sday='';var aDate='';if(jsonResp!=null){ errorCode=jsonResp.error; if(errorCode==0){ if(opr==1){     if(jsonResp.result.DriverPersonInfo==""){alert("получен пустой ответ");return;}     $('#sName2').val(jsonResp.result.DriverPersonInfo.firstNameLatin);     $('#sName1').val(jsonResp.result.DriverPersonInfo.lastNameLatin);     $('#sName3').val(jsonResp.result.DriverPersonInfo.middleNameLatin);     $('#sAddress').val(jsonResp.result.DriverPersonInfo.address);     $('#sGender').val(jsonResp.result.DriverPersonInfo.gender);     sForm=$('input:radio[name=sForm]');     sForm.filter('[value=2]').prop('checked',true);     individualOrentity(1);     $('#sPasIss').val(jsonResp.result.DriverPersonInfo.issuedBy);     if(jsonResp.result.DriverPersonInfo.startDate.length>0){         sdata=jsonResp.result.DriverPersonInfo.startDate;         Syear=sdata.substring(0,4);         Smonth=sdata.substring(5,7);         Sday=sdata.substring(8,10);         aDate=Sday+"-"+Smonth+"-"+Syear;         $('#sPasData').val(aDate);     }     if(jsonResp.result.DriverPersonInfo.birthDate.length>0){         sdata=jsonResp.result.DriverPersonInfo.birthDate;         Syear=sdata.substring(0,4);         Smonth=sdata.substring(5,7);         Sday=sdata.substring(8,10);         aDate=Sday+"-"+Smonth+"-"+Syear;         $('#sDateOfBrith').val(aDate);     }  }else if(opr==2){if(jsonResp.result.DriverPersonInfo==""){alert("получен пустой ответ");return;}$('#vName2').val(jsonResp.result.DriverPersonInfo.firstNameLatin);$('#vName1').val(jsonResp.result.DriverPersonInfo.lastNameLatin);$('#vName3').val(jsonResp.result.DriverPersonInfo.middleNameLatin);sForm=$('input:radio[name=vForm]');sForm.filter('[value=2]').prop('checked',true);individualOrentity(2);}else if(opr>=3 && opr<=7){if(jsonResp.result.DriverPersonInfo==""){alert("получен пустой ответ");}else {$("#d"+driverNum+"name2").val(jsonResp.result.DriverPersonInfo.firstNameLatin);$("#d"+driverNum+"name1").val(jsonResp.result.DriverPersonInfo.lastNameLatin);$("#d"+driverNum+"name3").val(jsonResp.result.DriverPersonInfo.middleNameLatin);$("#d"+driverNum+"pkem").val(jsonResp.result.DriverPersonInfo.issuedBy);if(jsonResp.result.DriverPersonInfo.startDate.length>0){sdata=jsonResp.result.DriverPersonInfo.startDate;Syear=sdata.substring(0,4);Smonth=sdata.substring(5,7);Sday=sdata.substring(8,10);aDate=Sday+"-"+Smonth+"-"+Syear;$("#d"+driverNum+"pdata").val(aDate);}if(jsonResp.result.DriverPersonInfo.birthDate.length>0){ sdata=jsonResp.result.DriverPersonInfo.birthDate;  Syear=sdata.substring(0,4); Smonth=sdata.substring(5,7); Sday=sdata.substring(8,10);  aDate=Sday+"-"+Smonth+"-"+Syear;  $("#d"+driverNum+"dobri").val(aDate); } }  if(jsonResp.result.DriverInfo!=""){  if(jsonResp.result.DriverInfo.licenseSeria.length>0){ $("#d"+driverNum+"vuser").val(jsonResp.result.DriverInfo.licenseSeria); } if(jsonResp.result.DriverInfo.licenseNumber.length>0){ $("#d"+driverNum+"vunum").val(jsonResp.result.DriverInfo.licenseNumber); } if(jsonResp.result.DriverInfo.issueDate.length>0){  sdata=jsonResp.result.DriverInfo.issueDate;  Syear=sdata.substring(0,4); Smonth=sdata.substring(5,7); Sday=sdata.substring(8,10);  aDate=Sday+"-"+Smonth+"-"+Syear;  $("#d"+driverNum+"vudata").val(aDate); } } }else if(opr==8 || opr==9){  if(jsonResp.result.DriverPersonInfo==""){alert("получен пустой ответ");return;}  $('#sName2').val(jsonResp.result.DriverPersonInfo.firstNameLatin); $('#sName1').val(jsonResp.result.DriverPersonInfo.lastNameLatin); $('#sName3').val(jsonResp.result.DriverPersonInfo.middleNameLatin); $('#Adress').val(jsonResp.result.DriverPersonInfo.address); if(opr==8) $('#sGender').val(jsonResp.result.DriverPersonInfo.gender);  sForm=$('input:radio[name=ClimerForm]'); sForm.filter('[value=1]').prop('checked',true); OsgoAgreement(13); $('#PassportIssuer').val(jsonResp.result.DriverPersonInfo.issuedBy);  if(jsonResp.result.DriverPersonInfo.startDate.length>0){ sdata=jsonResp.result.DriverPersonInfo.startDate;  Syear=sdata.substring(0,4); Smonth=sdata.substring(5,7); Sday=sdata.substring(8,10); aDate=Sday+"-"+Smonth+"-"+Syear;  $('#PassportDate').val(aDate); } if(opr==8) if(jsonResp.result.DriverPersonInfo.birthDate.length>0){ sdata=jsonResp.result.DriverPersonInfo.birthDate;  Syear=sdata.substring(0,4); Smonth=sdata.substring(5,7); Sday=sdata.substring(8,10);  aDate=Sday+"-"+Smonth+"-"+Syear;  $('#sDateOfBrith').val(aDate); } } }else{alert(jsonResp.error_message);}  } } });}function getInputSelection(el){ var start=0,end=0,normalizedValue,range,textInputRange,len,endRange; if(typeof el.selectionStart=="number" && typeof el.selectionEnd=="number"){ start=el.selectionStart; end=el.selectionEnd; }else{ range=document.selection.createRange(); if(range && range.parentElement()==el){ len=el.value.length; normalizedValue=el.value.replace(/\r\n/g,"\n"); // Create a working TextRange that lives only in the input textInputRange=el.createTextRange(); textInputRange.moveToBookmark(range.getBookmark()); // Check if the start and end of the selection are at the very end of the input,// since moveStart/moveEnd doesn't return what we want in those cases endRange=el.createTextRange(); endRange.collapse(false); if(textInputRange.compareEndPoints("StartToEnd",endRange) >-1){ start=end=len; }else{ start=-textInputRange.moveStart("character",-len); start +=normalizedValue.slice(0,start).split("\n").length - 1; if(textInputRange.compareEndPoints("EndToEnd",endRange) >-1){ end=len; }else{ end=-textInputRange.moveEnd("character",-len); end +=normalizedValue.slice(0,end).split("\n").length - 1; } } } } return { start:start, end:end };}function setCaretPosition(ctrl,start,end){    // IE >=9 and other browsers    if(ctrl.setSelectionRange){        ctrl.focus();        ctrl.setSelectionRange(start,end);        // IE < 9    }else if(ctrl.createTextRange){        var range=ctrl.createTextRange();        range.collapse(true);        range.moveEnd('character',end);        range.moveStart('character',start);        range.select();    }}function getSelectedText(){    if(window.getSelection){// all browsers, except IE before version 9	var selectionRange=window.getSelection();	return selectionRange.toString();    }else{        if(document.selection.type=='None'){            return null;        }else{            var textRange=document.selection.createRange();            return textRange.text;        }    }} function removeAllButLast(string,token){    var parts=string.split(token);    if(parts[1]===undefined) return string;    else return parts.slice(0,-1).join('')+token+parts.slice(-1)}function numberWithCommas(x){    var parts=x.toString().split(".");    parts[0]=parts[0].replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1 ');    return parts.join(".");}function copyClipboard(e_id){    var ctrlRange=document.body.createControlRange();    ctrlRange.add(document.getElementById(e_id));    ctrlRange.execCommand("Copy");}function changeCountry(element){    var countrySeleced=$(element).val();    if(countrySeleced==3){    $("#kazaxAuto").show();    $("#tajikAuto").hide();$("#tajikAutoType").val('0');    $("#kirgizAuto").hide();$("#kirgizAutoType").val('0');    $("#turkmanAuto").hide();$("#turkmanAutoType").val('0');    }else if(countrySeleced==4){    $("#kazaxAuto").hide();$("#kazaxAutoType").val('0');    $("#tajikAuto").show();    $("#kirgizAuto").hide();$("#kirgizAutoType").val('0');    $("#turkmanAuto").hide();$("#turkmanAutoType").val('0');    }else if(countrySeleced==5){    $("#kazaxAuto").hide();$("#kazaxAutoType").val('0');    $("#tajikAuto").hide();$("#tajikAutoType").val('0');    $("#kirgizAuto").show();    $("#turkmanAuto").hide();$("#turkmanAutoType").val('0');    }else if(countrySeleced==6){    $("#kazaxAuto").hide();$("#kazaxAutoType").val('0');    $("#tajikAuto").hide();$("#tajikAutoType").val('0');    $("#kirgizAuto").hide();$("#kirgizAutoType").val('0');    $("#turkmanAuto").show();    }}function selectAllCheckBoxes(mainElement){    if($("#"+mainElement).is(':checked')){        $('.checkBoxOfForm').each(function(){        $(this).prop('checked',true);        });    }else{        $('.checkBoxOfForm').each(function(){        $(this).prop('checked',false);        });    }}function selectAllCheckBoxes2(mainElement){    if($("#"+mainElement).is(':checked')){        $('.'+mainElement).each(function(){        $(this).prop('checked',true);        });    }else{        $('.'+mainElement).each(function(){        $(this).prop('checked',false);        });    }}function selectAllCheckByClass(clickedElement,mainElement){    var action=true;    if($(clickedElement).prop("title")=='false'){        action=false;        $(clickedElement).prop('title','true');        $(clickedElement).html('всё');    }else{        action=true;        $(clickedElement).prop('title','false');        $(clickedElement).html('отменить');    }    $('.'+mainElement).each(function(){	$(this).prop('checked',action);    });}function showFilterElements(){    var float_height=$("#divTableBody").height();    $('.divTableHeader').each(function(){float_height=float_height+$(this).height();});    $("#filterBlock").height(float_height-50);    $("#divTableBody").toggle();    $(".divTableHeader").toggle();    $("#filterBlock").toggle();}function resizeElement(id,full,h,w){    var winHeight=$(window.parent).height();    var winWeight=$(window.parent).width();    if(full=='FULL'){	$("#"+id).height(winHeight).width(winWeight);    }else if(full=='HALF'){	$("#"+id).width (winWeight/2);    }else{	$("#"+id).height(h).width(w);    }}function reSizeImg(id){    var width=document.getElementById(id).clientWidth;    var height=document.getElementById(id).clientHeight;    if((width==450) || (height==450)){	document.getElementById(id).style.width='auto';	document.getElementById(id).style.height='auto';    }else{	document.getElementById(id).style.width='450px';	document.getElementById(id).style.height='450px';    }}function changeReportMethod(){    if($("#method").val()==1){	$('.method1').show();	$('.method2').hide();    }else if($("#method").val()==2){	$('.method1').hide();	$('.method2').show();    }}function fnScroll(){    $('.divTableHeader').scrollLeft($('#divTableBody').scrollLeft());}function setElementHeight(){    var float_height=0;    var float_nested_height=0;    // float_height класли элементлар буйини уни ичидига элементга караб куйиш    $('.float_height').each(function(){        var existNested=0;        var	that=$(this);        float_nested_height=0;        $(this).children("table").each(function(){        float_nested_height=float_nested_height+$(this).height();        existNested=1;        });        if(existNested==1)        $(that).height(float_nested_height);    });    // float_height класли элементлар буйини йигиндиси    $('.float_height').each(function(){float_height=float_height+$(this).height();});    // Экран - (float_height класли элементлар буйини йигиндиси)    $(".fixed_height").height($(window).height()-float_height);    float_height=0;    // float_height_Left класли элементлар буйини йигиндиси    $('.float_height_Left').each(function(){float_height=float_height+$(this).height();});    // Экран - (fixed_height_Left класли элементлар буйини йигиндиси)    $(".fixed_height_Left").height($(window).height()-float_height);    $("body").css('visibility','visible');}function copyValueByMe (pattern,min,max,etalon){    var i=0;    if($("#"+etalon).is(':checked')){	for (i=min;i <=max;i++){$("#"+pattern+""+i).val($("#"+pattern+"1").val());}    }} function upload(){    if(progress) return;    var fileNme=$("#"+$("#pressedInputId").val()).val();    if(fileNme){    fileNme=fileNme.toUpperCase();    if((fileNme.indexOf(".PNG",this.length - 4) !==-1) || (fileNme.indexOf(".JPG",this.length - 4) !==-1)){    // Boshqa file polyalarni deactiv qilish    $('.vertualClass').each(function(i,obj){    if($(this).attr('name')!=$("#pressedInputId").val()){     $(this).attr("disabled","disabled");    }    });    var uploadform=document.getElementById('Form');    var time=new Date().getTime();    uploadform.action='FileUpload?time='+time+'&Operation='+$("#Operation").val()+'&folderId='+$("#folderId").val()+'&cntId='+$("#cntId").val();    uploadform.submit();    startProgressbar(time);    }else{alert("Файл должен быть изображением !");}    }else{alert("Нет файла !");} }function startProgressbar (startTime){    $('.progress-bar').css('display','block');    progress=setInterval(function(){    $.ajax({    type:"GET",    url:"FileUpload",    data:{time:startTime},    success:function (data,textStatus,jqXHR){    //$("#test").html($("#test").html()+'('+data+')');    var d=eval('('+data+')');    var uploadprogress=parseInt(d.progress[startTime]);    //$("#test").html($("#test").html()+uploadprogress);    $('.progress').css('width',uploadprogress+'px');    if(uploadprogress==100){    //$("#test").html($("#test").html()+'Finifh !');    clearInterval(progress);    setTimeout(function(){    $('.progress-bar').css('display','');    $('.progress').css('width','');    progress=null;    //Refresher("RefreshModal");    },1000);    $("#showFilePacket").submit();    }     }     })    },1000);}function downloadFileFromModalA(operation,rowid,type,fileName){    var parametrs="FileDownload?"+"Operation="+operation+"&rowid="+rowid+"&fileName="+encodeURIComponent(fileName)+"&type="+type;    document.getElementById('filefrm').src=parametrs;}function downloadFileFromModal(operation,rowid,fileName){    var parametrs="FileDownload?"+"Operation="+operation+"&rowid="+rowid+"&fileName="+encodeURIComponent(fileName);    document.getElementById('filefrm').src=parametrs;}function downloadFileFromModal1(operation,rowid,type,SubOperation,format,lang){    var parametrs="FileDownload?"+"Operation="+operation+"&rowid="+rowid+"&type="+type+"&SubOperation="+SubOperation+"&format="+format+"&lang="+lang;    if($('#filefrm').length){    }else{	$("body").append("<iframe style='display:none' id='filefrm' name='filefrm' src='' align='left' frameborder='0' scrolling='no'></iframe>");    }    document.getElementById('filefrm').src=parametrs;}function clearFilters(){    $('#filterBlock input').each(function(){$(this).val('');});    $('[name="begin"]').trigger('click');}function AsTemplateCopy(operation){if($("#AsTemplate").is(':checked')){$(".closeWhenAsTempl").hide();$("#SubmitBtn").hide();$("#AsTemplateBtn").show();$("#agent [value='0']").attr("selected","selected");$("#organization [value='0']").attr("selected","selected");if(operation==1){$("#databegin").val('');$("#dataend").val('');$("#dataOfClime").val('');$("#dataRegOfClime").val('');$("#contractNum").val('');$("#contractDate").val('');$("#insurType [value='0']").attr("selected","selected");$("#insurTime [value='0']").attr("selected","selected");$("#insurPeriod [value='0']").attr("selected","selected");$("#currencyRate [value='0']").attr("selected","selected");}if(operation==2){$("#databegin").val('');$("#dataend").val('');}if(operation==3){$("#databegin").val('');$("#dataend").val('');$("#dataOfClime").val('');$("#dataRegOfClime").val('');}if(operation==4){$("#PeriodBegin").val('');$("#PeriodEnd").val('');$("#dataOfClime").val('');$("#dataRegOfClime").val('');}}else{$(".closeWhenAsTempl").show();$("#AsTemplateBtn").hide();$("#SubmitBtn").show();}}function CopyInsurer(){var v_t=$("input[name='sForm']:checked").val();var v_limit=$("#limit").val();if(((v_limit==2)||(v_limit==4))&&(v_t==2)&&($("#Idriver").is(':checked'))){$("#d1name1").val($("#sName1").val());$("#d1name2").val($("#sName2").val());$("#d1name3").val($("#sName3").val());$("#d1pser").val($("#sPasSer").val());$("#d1pnum").val($("#sPasNum").val());$("#d1pdata").val($("#sPasData").val());$("#d1pkem").val($("#sPasIss").val());$("#d1dobri").val($("#sDateOfBrith").val());$("#d1pinf").val($("#sPasPinfl").val());$("#d1exp").val("");//$("#d1age").val("");$("#d1vuser").val("");$("#d1vunum").val("");$("#d1vudata").val("");$("#d1inn").val("");$("#d1Violation [value='"+$("#sViolation").val()+"']").attr("selected","selected");$("#d1Event [value='"+$("#sEvent").val()+"']").attr("selected","selected");}else{$("#d1name").val("");$("#d1pser").val("");$("#d1pnum").val("");$("#d1pdata").val("");$("#d1pkem").val("");$("#d1exp").val("");//$("#d1age").val("");$("#d1vuser").val("");$("#d1vunum").val("");$("#d1vudata").val("");$("#d1inn").val("");$("#d1Violation [value='0']").attr("selected","selected");$("#d1Event [value='0']").attr("selected","selected");}}function showWait(){    $("#waitIcon").show();}function showWaitSecunds(){    $("#waitIcon").show();     pause();}function clearForm(formId){    $('#'+formId+' input').each(function(){    if($(this).hasClass("NotClear")){}    else    $(this).val('');    });    $('#'+formId+' select').each(function(){    if($(this).hasClass("NotClear")){}    else    $(this).val($(this).find('option:first').val());    });}function SelectVictumForCheck(eventNumber,resolution,id){    resolution=resolution.replace(/\s+/g,"");    resolution=resolution.replace(/,/g,".");    var doc=parent.document;    var frm=$("#frame2",doc);    frm.contents().find("#idVictum").val(id);    frm.contents().find("#eventNumber").val(eventNumber);    frm.contents().find("#resolution").val(resolution);}function SelectPaymantForCheck (pamantSum,id,date){    pamantSum=pamantSum.replace(/\s+/g,"");    pamantSum=pamantSum.replace(/,/g,".");    var doc=parent.document;    var frm=$("#frame2",doc);    frm.contents().find("#idPayamnt").val(id);    frm.contents().find("#PayamntSumma").val(pamantSum);}function SelectMoneyForCheck (moneySum,id,date){    moneySum=moneySum.replace(/\s+/g,"");    moneySum=moneySum.replace(/,/g,".");    var doc=parent.document;    var frm=$("#frame2",doc);    frm.contents().find("#idMoney").val(id);    frm.contents().find("#moneySumma").val(moneySum);    frm.contents().find("#agentData").val(date);    CalculateAgenComissionSum();}function SelectPolisForCheck(vid,polisNum,premya,id,agentId,agentName,agnetProcent){    premya=premya.replace(/\s+/g,"");    premya=premya.replace(/,/g,".");    var doc=parent.document;    var frm=$("#frame2",doc);    frm.contents().find("#vid").val(vid);    frm.contents().find("#polisNum").val(polisNum);    frm.contents().find("#idAccount").val(id);    frm.contents().find("#polisSumma").val(premya);    frm.contents().find("#idAgent").val(agentId);    frm.contents().find("#agentName").val(agentName);    frm.contents().find("#agentProcent").val(agnetProcent);    CalculateAgenComissionSum();}function CalculateAgenComissionSum(){    var doc=parent.document;    var frm=$("#frame2",doc);    var comissionProcent=frm.contents().find("#agentProcent").val();    var money=frm.contents().find("#moneySumma").val();    var premya=frm.contents().find("#polisSumma").val();    var vid=frm.contents().find("#vid").val();    var comission="0.00";    var baseForComision="0.00";    if((premya!="")&&(money!="")&&(comissionProcent!="")&&(premya>0)&&(money>0)&&(comissionProcent>0)){    if(vid==1) baseForComision=premya;    else {	if(premya>money) baseForComision=money;else baseForComision=premya;    }    comission=baseForComision/100*comissionProcent;    comission=Math.round(comission*100)/100;    frm.contents().find("#agentSumma").val(comission);    }}function openSverka(list1,list2,list3){    $('#loadImg1').css('display','block');    $('#Form').attr('target','frame1');    $('#ListType').val(list1);    $('#Form').submit();    $('#loadImg2').css('display','block');    $('#Form').attr('target','frame2');    $('#ListType').val(list2);    $('#Form').submit();    $('#loadImg3').css('display','block');    $('#Form').attr('target','frame3');    $('#ListType').val(list3);    $('#Form').submit();}function AddOptionFromMultElemnts(FromSelect,FromText,elementTo,opr,optionIndex){ if(opr=='do'){ var mask=/^[0-9\-,]{1,}$/; var blankTypeName=$("#"+FromSelect+" option:selected").text(); var blankTypeId=$("#"+FromSelect+" option:selected").val(); var blank=$("#"+FromText).val(); if(blankTypeId>0){ blankTypeName=blankTypeName.replace(/"+/g,''); blankTypeName=blankTypeName.replace(/'+/g,''); blank=blank.replace(/[^-,0-9]/gim,''); blank=blank.replace(/-,+/g,','); blank=blank.replace(/,-+/g,','); blank=blank.replace(/--+/g,'-'); blank=blank.replace(/,,+/g,','); blank=blank.replace(/;;+/g,';'); if(blank.search(mask)!==-1){ var id="T:"+blankTypeId+"B:"+blank+";"; var text=blankTypeName+" ("+blank+")"; $('#'+elementTo).append($('<option>',{value:id,text:text })); $("#contener").val($("#contener").val()+id); $("#HiddenCumulative").val($("#HiddenCumulative").val()+"<option value='"+id+"'>"+text+"</option>"); } } } else if(opr=='undo'){var content=$("#contener").val();var hiddenCumulative=$("#HiddenCumulative").val();$('#'+elementTo+' > option').each(function(){if(this.value==optionIndex){hiddenCumulative=hiddenCumulative.replace("<option value='"+this.value+"'>"+this.text+"</option>",'');content=content.replace(this.value,'');$("#contener").val(content);$("#HiddenCumulative").val(hiddenCumulative); $(this).remove(); }}); }}function OsgoAgreement(operation){if(operation==1){var newPolis=$("#newPolis").val();if(newPolis==1) $("#TablePolis").show();else $("#TablePolis").hide();}else if(operation==2){var auto=$("#auto").val();if(auto==1) $("#TableAuto").show();else $("#TableAuto").hide();}else if(operation==3){var driver=$("#driver").val();if(driver==1) $("#TableDriver").show();else $("#TableDriver").hide();}else if(operation==4){var insurer=$("#InsurChange").val();if(insurer==1) $("#TableInsurer").show();else $("#TableInsurer").hide();}else if(operation==5){var method=$("#EndChange").val();if(method==1) $("#EndChangeTable").show();else $("#EndChangeTable").hide();}else if(operation==6){var method=$("#InsurSumChange").val();if(method==1) $("#NewInsurSumTable").show();else $("#NewInsurSumTable").hide();}else if(operation==7){var method=$("#ObjectChange").val();if(method==1) $("#TableObject").show();else $("#TableObject").hide();}else if(operation==8){var method=$("#TranchChange").val();if(method==1) $("#TableTranch").show();else $("#TableTranch").hide();}else if(operation==9){var method=$("#owner").val();if(method==2){$("#OwnerTable").show();$("#discount [value='1']").attr("selected","selected");$("#discount").attr('disabled','disabled');}else {$("#OwnerTable").hide();$("#discount [value='1']").attr("selected","selected");$('#discount').removeAttr("disabled");}}else if(operation==10){var driver=$("#limit").val();if(driver==2) $("#TableDriver").show();else $("#TableDriver").hide();}else if(operation==11){var regres=$("#Regres").val();if(regres==1) $("#RegresTable").show();else $("#RegresTable").hide();}else if(operation==12){var regres=$("#DirectManeg").val();if(regres==1) $("#DirectManegTable").show();else $("#DirectManegTable").hide();}else if(operation==13){var regres=$("#ClimerForm").val();if(regres==1){$("#fiz1").show();$("#fiz2").show();$("#fiz3").show();$("#fiz4").show();$("#fiz5").show();$("#fiz6").show();$("#yur1").hide();$("#yur2").hide();$("#yur3").hide();$("#yur4").hide();}else{$("#fiz1").hide();$("#fiz2").hide();$("#fiz3").hide();$("#fiz4").hide();$("#fiz5").hide();$("#fiz6").hide();$("#yur1").show();$("#yur2").show();$("#yur3").show();$("#yur4").show();}$("#Adress").val();}else if(operation==14){var regres=$("#ClimeStatus").val();if(regres==2) $("#ClimeStatusRej").show();else $("#ClimeStatusRej").hide();}else if(operation==15){var regres=$("#Pul").val();if(regres==1) $("#PulTable").show();else $("#PulTable").hide();}else if(operation==16){var regres=$("#ReInsurance").val();if(regres==1) $("#ReInsuranceTable").show();else $("#ReInsuranceTable").hide();}else if(operation==17){var regres=$("#Status").val();if(regres==2) $("#mustCallRow").show();else $("#mustCallRow").hide();if(regres==3) $("#oblectRow").show();else $("#oblectRow").hide();}else if(operation==18){var driver=$("#limit").val();if(driver==4) $(".TableDriver").show();else $(".TableDriver").hide();}}function changeMethodTranch(){    var method=$("#Mode").val();    if(method==1){	$("input[name='FirstPayment']").val("");	$("input[name='FirstPayment']").removeAttr("disabled");    }else if(method==2){	$("input[name='FirstPayment']").val("");	$("input[name='FirstPayment']").attr("disabled","disabled");    }}function changeMethodAgreement(){    var method=$("#Method").val();    if(method==1){	$("input[name='NewInsurTarif']").val("");	$("input[name='NewInsurTarif']").attr("disabled","disabled");	$("input[name='NewInsurPrem']").val("");	$("input[name='NewInsurPrem']").removeAttr("disabled");    }else if(method==2){	$("input[name='NewInsurTarif']").val("");	$("input[name='NewInsurTarif']").removeAttr("disabled");	$("input[name='NewInsurPrem']").val("");	$("input[name='NewInsurPrem']").attr("disabled","disabled");    }}function changeMethod(opr){var method=$("#Method").val();if(opr==1){    if(method==1){        $("input[name='Tarif']").val("");        $("input[name='Tarif']").attr("disabled","disabled");        $("input[name='InsurPremya']").val("");        $("input[name='InsurPremya']").removeAttr("disabled");    }else if(method==2){        $("input[name='Tarif']").val("");        $("input[name='Tarif']").removeAttr("disabled");        $("input[name='InsurPremya']").val("");        $("input[name='InsurPremya']").attr("disabled","disabled");    }}else if(opr==2){    if(method==1){        $("input[name='Tarif1']").val("");        $("input[name='Tarif1']").attr("disabled","disabled");        $("input[name='InsurPremya1']").val("");        $("input[name='InsurPremya1']").removeAttr("disabled");        $("input[name='Tarif2']").val("");        $("input[name='Tarif2']").attr("disabled","disabled");        $("input[name='InsurPremya2']").val("");        $("input[name='InsurPremya2']").removeAttr("disabled");    }else if(method==2){        $("input[name='Tarif1']").val("");        $("input[name='Tarif1']").removeAttr("disabled");        $("input[name='InsurPremya1']").val("");        $("input[name='InsurPremya1']").attr("disabled","disabled");        $("input[name='Tarif2']").val("");        $("input[name='Tarif2']").removeAttr("disabled");        $("input[name='InsurPremya2']").val("");        $("input[name='InsurPremya2']").attr("disabled","disabled");    }}else if(opr==3){    if(method==1){        $("input[name='Tarif1']").val("");        $("input[name='Tarif1']").attr("disabled","disabled");        $("input[name='InsurPremya1']").val("");        $("input[name='InsurPremya1']").removeAttr("disabled");        $("input[name='Tarif2']").val("");        $("input[name='Tarif2']").attr("disabled","disabled");        $("input[name='InsurPremya2']").val("");        $("input[name='InsurPremya2']").removeAttr("disabled");        $("input[name='Tarif3']").val("");        $("input[name='Tarif3']").attr("disabled","disabled");        $("input[name='InsurPremya3']").val("");        $("input[name='InsurPremya3']").removeAttr("disabled");        $("input[name='Tarif4']").val("");        $("input[name='Tarif4']").attr("disabled","disabled");        $("input[name='InsurPremya4']").val("");        $("input[name='InsurPremya4']").removeAttr("disabled");        $("input[name='Tarif5']").val("");        $("input[name='Tarif5']").attr("disabled","disabled");        $("input[name='InsurPremya5']").val("");        $("input[name='InsurPremya5']").removeAttr("disabled");    }else if(method==2){        $("input[name='Tarif1']").val("");        $("input[name='Tarif1']").removeAttr("disabled");        $("input[name='InsurPremya1']").val("");        $("input[name='InsurPremya1']").attr("disabled","disabled");        $("input[name='Tarif2']").val("");        $("input[name='Tarif2']").removeAttr("disabled");        $("input[name='InsurPremya2']").val("");        $("input[name='InsurPremya2']").attr("disabled","disabled");        $("input[name='Tarif3']").val("");        $("input[name='Tarif3']").removeAttr("disabled");        $("input[name='InsurPremya3']").val("");        $("input[name='InsurPremya3']").attr("disabled","disabled");        $("input[name='Tarif4']").val("");        $("input[name='Tarif4']").removeAttr("disabled");        $("input[name='InsurPremya4']").val("");        $("input[name='InsurPremya4']").attr("disabled","disabled");        $("input[name='Tarif5']").val("");        $("input[name='Tarif5']").removeAttr("disabled");        $("input[name='InsurPremya5']").val("");        $("input[name='InsurPremya5']").attr("disabled","disabled");    }  }}function ChangeForm(){    var form=$("#sForm").val();    if(form==1){        $("#Form2Table").hide();        $("#Form1Table").show();        $("input[name='PasSer']").val("");        $("input[name='PasNum']").val("");        $("input[name='PasDate']").val("");        $("input[name='PasIss']").val("");    }else if(form==2){        $("#Form1Table").hide();        $("#Form2Table").show();        $("input[name='Account']").val("");        $("input[name='Bank']").val("");        $("#Bank").html("");        $("input[name='BankName']").val("");        $("input[name='Okonh']").val("");        $("#Okonh").html("");        $("input[name='OkonhName']").val("");    }}function deleteRow(){    var CountOfBlank=$("#CountOfBlank").val();    var CountOfBlankNew=parseInt(CountOfBlank,10)-1;    if(CountOfBlankNew>0){	$("#line"+CountOfBlank).remove();	$("#CountOfBlank").val(CountOfBlankNew);    }}function addRow(){    //StartDate ва EndDate ни disable килишк керак    var CountOfBlank=$("#CountOfBlank").val();    var CountOfBlankNew=parseInt(CountOfBlank,10)+1;    var line=     "<tr id='line"+CountOfBlankNew+"'>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"blankNumber' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"InsurSum' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"InsurPrem' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PolisIssDate' value='' data-type='data'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PolisIssTime' value='00:00' data-type='time'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PayedSum' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PayedDate' value='' data-type='data'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"StartDate' value='' data-type='data' disabled/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"EndDate' value='' data-type='data' disabled/></td>"+     "</tr>";    $("#line"+CountOfBlank).after(line);    $("#CountOfBlank").val(CountOfBlankNew);    setMaskAgain();}function addRowGruz(){    var CountOfBlank=$("#CountOfBlank").val();    var CountOfBlankNew=parseInt(CountOfBlank,10)+1;    var line=     "<tr id='line"+CountOfBlankNew+"'>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"blankNumber' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"InsurSum' value=''/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"InsurPrem' value='' disabled/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PolisIssDate' value='' data-type='data'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PolisIssTime' value='00:00' data-type='time'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PayedSum' value='' disabled/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"PayedDate' value='' data-type='data' disabled/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"StartDate' value='' data-type='data'/></td>"+     "<td class='sectionTable'><input class='InputFull' type='text' name='"+CountOfBlankNew+"EndDate' value='' data-type='data'/></td>"+     "</tr>";    $("#line"+CountOfBlank).after(line);    $("#CountOfBlank").val(CountOfBlankNew);    setMaskAgain();}function submitForm(formId){    $('#'+formId).hide();    $('#'+formId+' input').each(function()  {$(this).removeAttr("disabled");});    $('#'+formId+' select').each(function(){$(this).removeAttr("disabled");});    return true;}function OpenWindowForSelect(url,Operation,AJAX,height,width,element,noItemInclude){    var winHeight=$(window.parent).height();    var winWeight=$(window.parent).width();    if((height==0)||(height>winHeight)){	if((winHeight<=1024)||(height>winHeight)) winHeight=winHeight/100*98;else winHeight=1024;    }else winHeight=height;    if((width==0)||(width>winWeight)){    if((winWeight<=1280)||(width>winWeight)) winWeight=winWeight/100*98;else winWeight=1280;    }else winWeight=width;    var obj=[     {"name":"url","val":url},     {"name":"Operation","val":Operation},     {"name":"AJAX","val":AJAX},     {"name":"noItemInclude","val":noItemInclude}     ];    var dialogWin=showModalDialog ("PublicService",obj,"dialogWidth:"+winWeight+"px; dialogHeight:"+winHeight+"px; center:yes; unadorned:yes;");    if(dialogWin){    for(var i=0;i<element.length;i++){$('[name="'+element[i]+'"]').val (dialogWin[i]);}    }}function ApplyFilter(){    var obj=[];    $('#filterBlock input').each(function(){obj.push({id:this.name,value:$(this).val()});});    $('#filterBlock select').each(function(){obj.push({id:this.name,value:$(this).val()});});    if($("#modalFrm",window.parent.document).is(':visible')){	for(var i=0;i<obj.length;i++){$("#"+obj[i].id,window.parent.document).val(obj[i].value);} 	$('[name="begin"]',window.parent.document).trigger('click');     } else {	 window.returnValue=obj;	 window.close();    }}function OpenFilterWindow(rowid,url,Operation,SubOperation,ownerId,height,width){    var winHeight=$(window.parent).height();    var winWeight=$(window.parent).width();    if((height==0)||(height>winHeight)){        if((winHeight<=1024)||(height>winHeight)) winHeight=winHeight/100*98;else winHeight=1024;    }else winHeight=height;    if((width==0)||(width>winWeight)){        if((winWeight<=1280)||(width>winWeight)) winWeight=winWeight/100*98;else winWeight=1280;    }else winWeight=width;    //Don't change order of elements    var obj=[     {"name":"url","val":url},     {"name":"rowid","val":rowid},     {"name":"Operation","val":Operation},     {"name":"SubOperation","val":SubOperation},     {"name":"ownerId","val":ownerId}     ];    $('#filterBlock input').each(function(){obj.push({name:this.name,val:$(this).val()});});    var dialogWin=showModalDialog ("PublicService",obj,"dialogWidth:"+winWeight+"px; dialogHeight:"+winHeight+"px; center:yes; unadorned:yes;");    if(dialogWin){	for(var i=0;i<dialogWin.length;i++){    	$("#"+dialogWin[i].id).val(dialogWin[i].value);        }        $('[name="begin"]').trigger('click');    }}function OpenItem1(rowid,url,Operation,SubOperation,ownerId,height,width,refreh){    var obj=[    {"name":"url","val":url},    {"name":"rowid","val":rowid},    {"name":"Operation","val":Operation},    {"name":"SubOperation","val":SubOperation},    {"name":"ownerId","val":ownerId}    ];    OpenItem(height,width,refreh,obj);}function OpenItem2(rowid,url,Operation,SubOperation,ownerId,height,width,refreh,type,elementType){    var obj=[    {"name":"url","val":url},    {"name":"rowid","val":rowid},    {"name":"Operation","val":Operation},    {"name":"SubOperation","val":SubOperation},    {"name":"ownerId","val":ownerId},    {"name":"type","val":type},    {"name":"elementType","val":elementType}    ];    OpenItem(height,width,refreh,obj);}function OpenItem3(rowid,url,Operation,SubOperation,height,width,method,year,month1,month2,beginDate,beginEnd){    var obj=[    {"name":"url","val":url},    {"name":"rowid","val":rowid},    {"name":"Operation","val":Operation},    {"name":"SubOperation","val":SubOperation},    {"name":"method","val":method},    {"name":"year","val":year},    {"name":"month1","val":month1},    {"name":"month2","val":month2},    {"name":"beginDate","val":beginDate},    {"name":"beginEnd","val":beginEnd}    ];    OpenItem(height,width,'no',obj);}function OpenItem4(rowid,url,Operation,SubOperation,height,width,method,year,month1,month2,beginDate,beginEnd,extra){    var obj=[    {"name":"url","val":url},    {"name":"rowid","val":rowid},    {"name":"Operation","val":Operation},    {"name":"SubOperation","val":SubOperation},    {"name":"method","val":method},    {"name":"year","val":year},    {"name":"month1","val":month1},    {"name":"month2","val":month2},    {"name":"beginDate","val":beginDate},    {"name":"beginEnd","val":beginEnd},    {"name":"extra","val":extra}    ];    OpenItem(height,width,'no',obj);}function OpenItem5(url,height,width,refreh){    var obj=[ {"name":"url","val":url} ];    var i;    for (i=4;i < arguments.length;i++){	var arrayOfStrings=arguments[i].split("=");	obj.push({"name":arrayOfStrings[0],"val":arrayOfStrings[1]});    }    OpenItem(height,width,refreh,obj);} function OpenItem6(rowid,url,Operation,SubOperation,ownerId,height,width,refreh,date,org,agt,vidGrp,blkType){    var obj=[    {"name":"url","val":url},    {"name":"rowid","val":rowid},    {"name":"Operation","val":Operation},    {"name":"SubOperation","val":SubOperation},    {"name":"ownerId","val":ownerId},    {"name":"date","val":date},    {"name":"org","val":org},    {"name":"agt","val":agt},    {"name":"vidGrp","val":vidGrp},    {"name":"blkType","val":blkType}    ];    OpenItem(height,width,refreh,obj);}function OpenItem(height,width,refresh,obj){    var winHeight=$(window.parent).height();    var winWeight=$(window.parent).width();    if((height==0)||(height>winHeight)){	if((winHeight<=1024)||(height>winHeight)) winHeight=winHeight/100*98;else winHeight=1024;    }else winHeight=height;    if((width==0)||(width>winWeight)){	if((winWeight<=1280)||(width>winWeight)) winWeight=winWeight/100*98;else winWeight=1280;    }else winWeight=width;    showModalDialog ("PublicService",obj,"dialogWidth:"+winWeight+"px; dialogHeight:"+winHeight+"px; center:yes; unadorned:yes;");    if(refresh=="list"){$('[name="begin"]').trigger('click');}    else if(refresh=="modal"){$('#SubOperation').val(7);$("#Form").submit();}    else if(refresh!=""){$('#'+refresh).trigger('click');}}function doAjax2(adress,method,batton,progressBarName){    var paramestrs="isAJAX=1";    $('.ChooseForFilter input ').each(function(){paramestrs=paramestrs+"&"+this.name+"="+$(this).val();});    $('.ChooseForFilter select ').each(function(){paramestrs=paramestrs+"&"+this.name+"="+$(this).val();});    $("#"+batton).attr("disabled","disabled");    $("#"+progressBarName).show();    $.ajax({     type:"POST",     url :adress,     data:paramestrs,     dataType:"json",     error:function (xhr,ajaxOptions,thrownError){alert(xhr.status);alert(thrownError);},     success:function(html){     if(method=='val'){     $("#"+progressBarName).hide();     $("#"+batton).removeAttr("disabled");     if(html.hasOwnProperty('rezult')){$("#AjaxContent").html(html.rezult);}     }     }     });}function doAjax(adress,method){    var paramestrs="Operation="+$('[name="Operation"]').val()+"&isAJAX=1";    $('.ChooseForFilter').each(function(){    if($(this).val() !=""){paramestrs=paramestrs+"&"+this.name+"="+$(this).val() ;}    });    $.ajax({     type:"POST",     url :adress,     data:paramestrs,     success:function(html){     if(method=='html'){     $("#AjaxContent").html('');     $("#AjaxContent").html(html);     setElementHeight();     }     }    });}function SelectRowById(rowId){    $(".listingRowSelected").removeClass('listingRowSelected');    $("#rowid"+rowId+" td").addClass ('listingRowSelected');}function InsuranсeDate(vid){if(vid==1){var sdata=$('#databegin').val();if(! $("#dataOfClime").val().length>0) $("#dataOfClime").val(sdata);if(! $("#dataRegOfClime").val().length>0) $("#dataRegOfClime").val(sdata);var v_it=$("#insurType").val();if(v_it<4){var Sday=sdata.substring(0,2);var Smonth=sdata.substring(3,5);var Syear=sdata.substring(6,10);var date=new Date(Syear,Smonth-1,Sday);if(v_it==1){date.addYears(1);}if(v_it==2){var adMonth=$("#insurPeriod").val();adMonth=parseInt(adMonth,10); if(adMonth>=1 && adMonth<=6){date.addMonths(adMonth+5);}else if(adMonth==7){date.addMonths(6);}else if(adMonth==8){date.addMonths(12);}}if(v_it==3){var adMonthS=$("#insurTime").val();adMonthS=parseInt(adMonthS,10);if(adMonthS>=3 && adMonthS<=12){date.addMonths(adMonthS-1);}else if(adMonthS==14){date.addMonths(2);}else if(adMonthS==15){date.addMonths(12);}}var SSyear=date.getFullYear();var SSmonth=date.getMonth()+1;if(SSmonth<10){SSmonth="0"+SSmonth;}var SSday=date.getDate();if(SSday<10){SSday="0"+SSday;}$('#dataend').val(SSday+"-"+SSmonth+"-"+SSyear);}}else if(vid==2){var sdata=$('#databegin').val();var Sday=sdata.substring(0,2);var Smonth=sdata.substring(3,5);var Syear=sdata.substring(6,10);var date=new Date(Syear,Smonth-1,Sday);date.addYears(1);var SSyear=date.getFullYear();var SSmonth=date.getMonth()+1;if(SSmonth<10){SSmonth="0"+SSmonth;}var SSday=date.getDate();if(SSday<10){SSday="0"+SSday;}if(! $("#dataOfClime").val().length>0) $("#dataOfClime").val(sdata);if(! $("#dataRegOfClime").val().length>0) $("#dataRegOfClime").val(sdata);if(! $("#contractDate").val().length>0) $("#contractDate").val(sdata);$('#dataend').val(SSday+"-"+SSmonth+"-"+SSyear);}else if(vid==3){var sdata=$('#ContData').val();if(! $("#PeriodBegin").val().length>0) $("#PeriodBegin").val(sdata);if(! $("#dataOfClime").val().length>0) $("#dataOfClime").val(sdata);if(! $("#dataRegOfClime").val().length>0) $("#dataRegOfClime").val(sdata);}else if(vid==4){var sdata=$('#contractDate').val();if(! $("#databegin").val().length>0) $("#databegin").val(sdata);if(! $("#dataOfClime").val().length>0) $("#dataOfClime").val(sdata);if(! $("#dataRegOfClime").val().length>0) $("#dataRegOfClime").val(sdata);}else if(vid==5){var sdata=$('#PeriodBegin').val();var Sday=sdata.substring(0,2);var Smonth=sdata.substring(3,5);var Syear=sdata.substring(6,10);var date=new Date(Syear,Smonth-1,Sday);date.addYears(1);var SSyear=date.getFullYear();var SSmonth=date.getMonth()+1;if(SSmonth<10){SSmonth="0"+SSmonth;}var SSday=date.getDate();if(SSday<10){SSday="0"+SSday;}if(! $("#dataOfClime").val().length>0) $("#dataOfClime").val(sdata);if(! $("#dataRegOfClime").val().length>0) $("#dataRegOfClime").val(sdata);$('#PeriodEnd').val(SSday+"-"+SSmonth+"-"+SSyear);}}function individualOrentity(opr){    if(opr==1){        var v_t=$("input[name='sForm']:checked").val();        $('#contractNum').val("");        $('#contractDate').val("");        if(v_t==1){        $(".selectSFiz").hide();$(".selectSYur").show();        $("#discount [value='1']").attr("selected","selected");        $('#discount').attr('disabled','disabled');        }else if(v_t==2){        $(".selectSFiz").show();$(".selectSYur").hide();        $("#discount [value='1']").attr("selected","selected");        $('#discount').removeAttr("disabled");        }    }else if(opr==2){        var v_t=$("input[name='vForm']:checked").val();        if(v_t==1){$(".selectVFiz").hide();$(".selectVYur").show();}        else if(v_t==2){$(".selectVFiz").show();$(".selectVYur").hide();}    }}function InsuranсeType(){    var v_it=$("#insurType").val();    if(v_it==1){        $('#databegin').val("");        $('#dataend').val("");        $('#dataend').attr("disabled","disabled");        $("#insurPeriod [value='0']").attr("selected","selected");        $("#insurTime [value='0']").attr("selected","selected");        $("#insurPeriod").attr("disabled","disabled");        $("#insurTime").attr("disabled","disabled");    }else if(v_it==2){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').attr("disabled","disabled");        $('#dataend').attr("disabled","disabled");        $("#insurPeriod [value='0']").attr("selected","selected");        $("#insurTime [value='0']").attr("selected","selected");        $("#insurTime").attr("disabled","disabled");        $("#insurPeriod").removeAttr("disabled") ;    }else if(v_it==3){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').attr("disabled","disabled");        $('#dataend').attr("disabled","disabled");        $("#insurPeriod [value='0']").attr("selected","selected");        $("#insurTime [value='0']").attr("selected","selected");        $("#insurPeriod").attr("disabled","disabled");        $("#insurTime").removeAttr("disabled");    }else if(v_it==4){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').removeAttr("disabled");        $('#dataend').removeAttr("disabled");        $("#insurPeriod [value='0']").attr("selected","selected");        $("#insurTime [value='0']").attr("selected","selected");        $("#insurPeriod").attr("disabled","disabled");        $("#insurTime").attr("disabled","disabled");    }}function InsuranсePeriod(){    var v_it=$("#insurPeriod").val();    if((v_it>0)&&($("#insurType").val()==2)){    $('#databegin').val("");    $('#dataend').val("");    $('#databegin').removeAttr("disabled");    $('#dataend').attr("disabled","disabled");    }}function InsuranсeTime(){    var v_it=$("#insurTime").val();    if((v_it>2)&&($("#insurType").val()==3)){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').removeAttr("disabled");        $('#dataend').attr("disabled","disabled");    }else if((v_it<=2)&&($("#insurType").val()==3)){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').removeAttr("disabled");        $('#dataend').removeAttr("disabled");    }}function InsuranсeTime2(){    var v_it=$("#insurTime").val();    if((v_it>13)&&($("#insurType").val()==3)){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').removeAttr("disabled");        $('#dataend').attr("disabled","disabled");    }else if((v_it==13)&&($("#insurType").val()==3)){        $('#databegin').val("");        $('#dataend').val("");        $('#databegin').removeAttr("disabled");        $('#dataend').removeAttr("disabled");    }}Date.prototype.copy=function(){return new Date(this.getTime());};Date.prototype.addDays=function(d){this.setDate(this.getDate()+(d-1));};Date.prototype.addWeeks=function(w){this.addDays(w * 7);};Date.prototype.addMonths=function(m){var d=this.getDate();this.setMonth(this.getMonth()+m);if(this.getDate() < d){this.setDate(0);}else {this.setDate(this.getDate()-1);}};Date.prototype.addYears=function(y){var m=this.getMonth();this.setFullYear(this.getFullYear()+y);if(m < this.getMonth()){this.setDate(0);}else {this.setDate(this.getDate()-1);}};Date.prototype.msPERDAY=1000*60*60*24;Date.prototype.getDaysBetween=function(d){d=d.copy();d.setHours(this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds());var diff=d.getTime() - this.getTime();return (diff)/this.msPERDAY;};//объявляем переменныеvar base=60;var clocktimer,dateObj,dh,dm,ds,ms;var readout='';var h=1,m=1,tm=1,s=0,ts=0,ms=0,show=true,init=0,ii=0;//функция для очистки поляfunction clearClock(){clearTimeout(clocktimer);h=1;m=1;tm=1;s=0;ts=0;ms=0;init=0;show=true;readout='00:00:00.00';$("#stopwatch").html(readout);ii=0;}//функция для старта секундомераfunction startTIME(){var cdateObj=new Date();var t=(cdateObj.getTime() - dateObj.getTime())-(s*1000);if(t>999){s++;}if(s>=(m*base)){ts=0;m++;}else{ts=parseInt((ms/100)+s);if(ts>=base){ts=ts-((m-1)*base);}}if(m>(h*base)){tm=1;h++;}else{tm=parseInt((ms/100)+m);if(tm>=base){tm=tm-((h-1)*base);}}ms=Math.round(t/10);if(ms>99){ms=0;}if(ms==0){ms='00';}if(ms>0&&ms<=9){ms='0'+ms;}if(ts>0){ds=ts;if(ts<10){ds='0'+ts;}}else{ds='00';}dm=tm-1;if(dm>0){if(dm<10){dm='0'+dm;}}else{dm='00';}dh=h-1;if(dh>0){if(dh<10){dh='0'+dh;}}else{dh='00';}readout=dh+':'+dm+':'+ds+'.'+ms;if(show==true){$("#stopwatch").html(readout);}clocktimer=setTimeout("startTIME()",1);}//функция для паузыfunction pause(){if(init==0){dateObj=new Date();startTIME();init=1;}else{if(show==true){show=false;}else{show=true;}}}function calculate2(){var FIVE_TIMES=0.00;var PREMYA=0.00;var TEXT_ALERT="Недостаточно фактических параметров";var isOk=true;var insurRegistration=0.20;//for insurType=4 var BAZA=["40000000.00"];var KBO=["3.00","1.00"];// LIMITvar КN=["1.00","1.00","1.00","1.00"];// NARUSHvar КSLUCH=["1.00","2.00","2.50","3.00"];// sluchvar КP=["0.70","1.00"];// SEZONvar КS=["0.40","1.00"];// SROKvar КVzrast=["1.00","1.00"];// vozrastvar КVstaj=["1.00","1.00","1.00"];// stajvar insurType=$("#insurType").val();var insurTime=$("#insurTime").val();insurTime=insurTime-12;var insurPeriod=$("#insurPeriod").val();insurPeriod=insurPeriod-6;var rowid=$("#rowid").val();var limit=$("#limit").val();var typeTs=null;var region=null;var sNarusheniya=$("#sViolation").val();sNarusheniya=sNarusheniya-4;var vNarusheniya=$("#vViolation").val();vNarusheniya=vNarusheniya-4;var d1Narusheniya=$("#d1Violation").val();d1Narusheniya=d1Narusheniya-4;var d2Narusheniya=$("#d2Violation").val();d2Narusheniya=d2Narusheniya-4;var d3Narusheniya=$("#d3Violation").val();d3Narusheniya=d3Narusheniya-4;var d4Narusheniya=$("#d4Violation").val();d4Narusheniya=d4Narusheniya-4;var d5Narusheniya=$("#d5Violation").val();d5Narusheniya=d5Narusheniya-4;var sEvent=$("#sEvent").val();sEvent=sEvent-9var vEvent=$("#vEvent").val();vEvent=vEvent-9;var d1Event=$("#d1Event").val();d1Event=d1Event-9;var d2Event=$("#d2Event").val();d2Event=d2Event-9;var d3Event=$("#d3Event").val();d3Event=d3Event-9;var d4Event=$("#d4Event").val();d4Event=d4Event-9;var d5Event=$("#d5Event").val();d5Event=d5Event-9;/*var d1age=$("#d1age").val();var d2age=$("#d2age").val();var d3age=$("#d3age").val();var d4age=$("#d4age").val();var d5age=$("#d5age").val();*/var d1exp=$("#d1exp").val();var d2exp=$("#d2exp").val();var d3exp=$("#d3exp").val();var d4exp=$("#d4exp").val();var d5exp=$("#d5exp").val();var sForm=$("input[name='sForm']:checked").val();var minage=0;var minexp=0;var maxEvent=0;var maxNarus=0;var Kage=0;var Kexp=0;if((insurType==2)&&(insurPeriod==0)) isOk=false;if((insurType==3)&&(insurTime==0)) isOk=false;if(!($('[name="sForm"]').is(':checked'))) isOk=false;if($("#TBOyur").val().length==0) isOk=false;if($("#TBOfiz").val().length==0) isOk=false;if(($("#KTyur").val().length==0)&&($("#KTTyur").val().length==0)) isOk=false;// фарки йук KTfiz хам шунга тенгif(limit==4){ /* if(d1age.length >0) minage=d1age; if(d2age.length >0) minage=Math.min(minage,d2age); if(d3age.length >0) minage=Math.min(minage,d3age); if(d4age.length >0) minage=Math.min(minage,d4age); if(d5age.length >0) minage=Math.min(minage,d5age); */ if(d1exp.length >0) minexp=d1exp; if(d2exp.length >0) minexp=Math.min(minexp,d2exp); if(d3exp.length >0) minexp=Math.min(minexp,d3exp); if(d4exp.length >0) minexp=Math.min(minexp,d4exp); if(d5exp.length >0) minexp=Math.min(minexp,d5exp); if($("#owner").val()==2){ maxEvent=Math.max(КSLUCH[sEvent-1],КSLUCH[vEvent-1]); maxNarus=Math.max(КN[sNarusheniya-1],КN[vNarusheniya-1]);  }else{ maxEvent=КSLUCH[sEvent-1]; maxNarus=КN[sNarusheniya-1]; } if((d1exp.length >0) /*&& (d1age.length >0)*/){maxEvent=Math.min(maxEvent,КSLUCH[d1Event-1]);maxNarus=Math.min(maxNarus,КN[d1Narusheniya-1]);} if((d2exp.length >0) /*&& (d2age.length >0)*/){maxEvent=Math.min(maxEvent,КSLUCH[d2Event-1]);maxNarus=Math.min(maxNarus,КN[d2Narusheniya-1]);} if((d3exp.length >0) /*&& (d3age.length >0)*/){maxEvent=Math.min(maxEvent,КSLUCH[d3Event-1]);maxNarus=Math.min(maxNarus,КN[d3Narusheniya-1]);} if((d4exp.length >0) /*&& (d4age.length >0)*/){maxEvent=Math.min(maxEvent,КSLUCH[d4Event-1]);maxNarus=Math.min(maxNarus,КN[d4Narusheniya-1]);} if((d5exp.length >0) /*&& (d5age.length >0)*/){maxEvent=Math.min(maxEvent,КSLUCH[d5Event-1]);maxNarus=Math.min(maxNarus,КN[d5Narusheniya-1]);} if(/*(minage==0) ||*/ (minexp==0) || (maxEvent==0)|| (maxNarus==0)) isOk=false;}if(isOk){ if(!($("#KTTyur").val().length==0)) region=$("#KTTyur").val();// фарки йук KTTfiz хам шунга тенгelse if(!($("#KTyur").val().length==0)) region=$("#KTyur").val();// фарки йук KTfiz хам шунга тенг if(sForm==1) typeTs=$("#TBOyur").val();else if(sForm==2) typeTs=$("#TBOfiz").val();if(insurType==3) region=1.40; if(limit==3){// без ограничение TEXT_ALERT="Формула с условием без ограничения количества лиц :\n"+BAZA[0]+" (База) * "+typeTs+" (Авто) * "+region+" (Регион) * "+KBO[0]+" (Без ограничения)"; if(insurType==1) PREMYA=BAZA[0] * typeTs * region * KBO[0];else if(insurType==2){PREMYA=BAZA[0] * typeTs * region * KBO[0]*КP[insurPeriod-1];TEXT_ALERT=TEXT_ALERT+" * "+КP[insurPeriod-1]+" (Период)";}else if(insurType==3){PREMYA=BAZA[0] * typeTs * region * KBO[0]*КS[insurTime-1];TEXT_ALERT=TEXT_ALERT+" * "+КS[insurTime-1] +" (Сезон)";}else if(insurType==4){PREMYA=BAZA[0] * typeTs * region * KBO[0]*insurRegistration;TEXT_ALERT=TEXT_ALERT+" * "+insurRegistration+" (Регистрация)";}}else if(limit==4){// с ограничением if(minage<=22) Kage=КVzrast[0];else if(minage>22) Kage=КVzrast[1]; if(minexp<=2) Kexp=КVstaj[0];else if((minexp>2)&&(minexp<=5)) Kexp=КVstaj[1];else if(minexp>5) Kexp=КVstaj[2];TEXT_ALERT="Формула с условием ограничения количества лиц :\n"+BAZA[0]+" (База) * "+typeTs+" (Авто) * "+region+" (Регион) * "+KBO[1]+" (Ограничение) * "+maxEvent+" (Случ) * "+Kage+" (Возраст) * "+maxNarus+" (Нарушение) * "+Kexp+" (Стаж)"; if(insurType==1) PREMYA=BAZA[0] * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp;else if(insurType==2){PREMYA=BAZA[0] * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * КP[insurPeriod-1];TEXT_ALERT=TEXT_ALERT+" * "+КP[insurPeriod-1]+" (Период)";}else if(insurType==3){PREMYA=BAZA[0] * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * КS[insurTime-1];TEXT_ALERT=TEXT_ALERT+" * "+КS[insurTime-1] +" (Сезон)";}else if(insurType==4){PREMYA=BAZA[0] * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * insurRegistration;TEXT_ALERT=TEXT_ALERT+" * "+insurRegistration+" (Регистрация)";}}if(PREMYA>0){FIVE_TIMES=BAZA[0] * typeTs*5/100;PREMYA=PREMYA/100;PREMYA=Math.round(PREMYA*100)/100;FIVE_TIMES=Math.round(FIVE_TIMES*100)/100;TEXT_ALERT=PREMYA+"\n"+TEXT_ALERT+" /100";if(FIVE_TIMES<PREMYA){PREMYA=FIVE_TIMES;TEXT_ALERT="Предельный уровень страховой премии :"+FIVE_TIMES+". Рассчитанная страховая премия :"+TEXT_ALERT;}}}$("#TEXT_ALERT").val(TEXT_ALERT);}function calculate(){var FIVE_TIMES=0.00;var PREMYA=0.00;var TEXT_ALERT="Недостаточно фактических параметров";var isOk=true;var insurRegistration=0.20;var BAZA=["3000.00"];var KBO=["4.20","1.00"];// LIMITvar TAXI=["0.70","0.60"];// LIMITvar КN=["1.00","1.50","1.50","1.50"];// NARUSHvar КP=["0.60","0.65","0.70","0.75","0.80","0.90"];// SEZONvar КS=["0.20","0.30","0.40","0.45","0.50","0.55","0.60","0.65","0.70","0.75","0.80","0.90"];// SROKvar КVzrast=["1.25","1.00"];// vozrastvar КVstaj=["1.40","1.10","1.00"];// stajvar КSLUCH=["1.00","0.90","0.80","0.70","0.60","0.50","1.20","1.30","1.55"];// sluchvar currency=$("#currencyRate").find("option:selected").attr("title");// курсvar insurType=$("#insurType").val();var insurTime=$("#insurTime").val();var insurPeriod=$("#insurPeriod").val();var rowid=$("#rowid").val();var limit=$("#limit").val();var typeTs=null;var region=null;var FixcedInsSum=$("#FixcedInsSum").val();var sNarusheniya=$("#sViolation").val();var vNarusheniya=$("#vViolation").val();var d1Narusheniya=$("#d1Violation").val();var d2Narusheniya=$("#d2Violation").val();var d3Narusheniya=$("#d3Violation").val();var d4Narusheniya=$("#d4Violation").val();var d5Narusheniya=$("#d5Violation").val();var sEvent=$("#sEvent").val();var vEvent=$("#vEvent").val();var d1Event=$("#d1Event").val();var d2Event=$("#d2Event").val();var d3Event=$("#d3Event").val();var d4Event=$("#d4Event").val();var d5Event=$("#d5Event").val();var d1age=$("#d1age").val();var d2age=$("#d2age").val();var d3age=$("#d3age").val();var d4age=$("#d4age").val();var d5age=$("#d5age").val();var d1exp=$("#d1exp").val();var d2exp=$("#d2exp").val();var d3exp=$("#d3exp").val();var d4exp=$("#d4exp").val();var d5exp=$("#d5exp").val();var sForm=$("input[name='sForm']:checked").val();var minage=0;var minexp=0;var maxEvent=0;var maxNarus=0;var Kage=0;var Kexp=0;if(currency==0) isOk=false;if((insurType==2)&&(insurPeriod==0)) isOk=false;if((insurType==3)&&(insurTime==0)) isOk=false;if(!($('[name="sForm"]').is(':checked'))) isOk=false;if($("#TBOyur").val().length==0) isOk=false;if($("#TBOfiz").val().length==0) isOk=false;if(($("#KTyur").val().length==0)&&($("#KTTyur").val().length==0)) isOk=false;// фарки йук KTfiz хам шунга тенгif(limit==2){ if(d1age.length >0) minage=d1age; if(d2age.length >0) minage=Math.min(minage,d2age); if(d3age.length >0) minage=Math.min(minage,d3age); if(d4age.length >0) minage=Math.min(minage,d4age); if(d5age.length >0) minage=Math.min(minage,d5age); if(d1exp.length >0) minexp=d1exp; if(d2exp.length >0) minexp=Math.min(minexp,d2exp); if(d3exp.length >0) minexp=Math.min(minexp,d3exp); if(d4exp.length >0) minexp=Math.min(minexp,d4exp); if(d5exp.length >0) minexp=Math.min(minexp,d5exp); if($("#owner").val()==2){maxEvent=Math.max(КSLUCH[sEvent-1],КSLUCH[vEvent-1]);maxNarus=Math.max(КN[sNarusheniya-1],КN[vNarusheniya-1]);} else {maxEvent=КSLUCH[sEvent-1];maxNarus=КN[sNarusheniya-1];} if((d1exp.length >0)&&(d1age.length >0)){maxEvent=Math.min(maxEvent,КSLUCH[d1Event-1]);maxNarus=Math.min(maxNarus,КN[d1Narusheniya-1]);} if((d2exp.length >0)&&(d2age.length >0)){maxEvent=Math.min(maxEvent,КSLUCH[d2Event-1]);maxNarus=Math.min(maxNarus,КN[d2Narusheniya-1]);} if((d3exp.length >0)&&(d3age.length >0)){maxEvent=Math.min(maxEvent,КSLUCH[d3Event-1]);maxNarus=Math.min(maxNarus,КN[d3Narusheniya-1]);} if((d4exp.length >0)&&(d4age.length >0)){maxEvent=Math.min(maxEvent,КSLUCH[d4Event-1]);maxNarus=Math.min(maxNarus,КN[d4Narusheniya-1]);} if((d5exp.length >0)&&(d5age.length >0)){maxEvent=Math.min(maxEvent,КSLUCH[d5Event-1]);maxNarus=Math.min(maxNarus,КN[d5Narusheniya-1]);} if((minage==0) || (minexp==0) || (maxEvent==0)|| (maxNarus==0)) isOk=false;}if(isOk){if(FixcedInsSum==1) currency=4000.00;if(rowid==0) currency=4000.00;if(!($("#KTTyur").val().length==0)) region=$("#KTTyur").val();// фарки йук KTfiz хам шунга тенгelse if(!($("#KTyur").val().length==0)) region=$("#KTyur").val();// фарки йук KTfiz хам шунга тенгif(sForm==1) typeTs=$("#TBOyur").val();else if(sForm==2) typeTs=$("#TBOfiz").val();if($("#taxi").val()==2){if(sForm==1) typeTs=TAXI[0];else if(sForm==2) typeTs=TAXI[1];}if(limit==1){// без ограничение TEXT_ALERT="Формула с условием без ограничения количества лиц :\n"+BAZA[0]+" (База) * "+currency+" (Курс) * "+typeTs+" (Авто) * "+region+" (Регион) * "+KBO[0]+" (Ограничение)";     if(insurType==1) PREMYA=BAZA[0] * currency * typeTs * region * KBO[0];else if(insurType==2){PREMYA=BAZA[0] * currency * typeTs * region * KBO[0]*КP[insurPeriod-1];TEXT_ALERT=TEXT_ALERT+" * "+КP[insurPeriod-1]+" (Период)";}else if(insurType==3){PREMYA=BAZA[0] * currency * typeTs * region * KBO[0]*КS[insurTime-1];TEXT_ALERT=TEXT_ALERT+" * "+КS[insurTime-1] +" (Сезон)";}else if(insurType==4){PREMYA=BAZA[0] * currency * typeTs * region * KBO[0]*insurRegistration;TEXT_ALERT=TEXT_ALERT+" * "+insurRegistration+" (Регистрация)";}}else if(limit==2){// с ограничением     if(minage<=22)Kage=КVzrast[0];else if(minage>22)Kage=КVzrast[1];     if(minexp<=2) Kexp=КVstaj[0];else if((minexp>2)&&(minexp<=5)) Kexp=КVstaj[1];else if(minexp>5)Kexp=КVstaj[2];TEXT_ALERT="Формула с условием ограничения количества лиц :\n"+BAZA[0]+" (База) * "+currency+" (Курс) * "+typeTs+" (Авто) * "+region+" (Регион) * "+KBO[1]+" (Ограничение) * "+maxEvent+" (Случ) * "+Kage+" (Возраст) * "+maxNarus+" (Нарушение) * "+Kexp+" (Стаж)";     if(insurType==1) PREMYA=BAZA[0] * currency * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp;else if(insurType==2){PREMYA=BAZA[0] * currency * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * КP[insurPeriod-1];TEXT_ALERT=TEXT_ALERT+" * "+КP[insurPeriod-1]+" (Период)";}else if(insurType==3){PREMYA=BAZA[0] * currency * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * КS[insurTime-1];TEXT_ALERT=TEXT_ALERT+" * "+КS[insurTime-1] +" (Сезон)";}else if(insurType==4){PREMYA=BAZA[0] * currency * typeTs * region * KBO[1] * maxEvent * Kage * maxNarus * Kexp * insurRegistration;TEXT_ALERT=TEXT_ALERT+" * "+insurRegistration+" (Регистрация)";}}if(PREMYA>0){FIVE_TIMES=BAZA[0] * currency * typeTs*5/100;PREMYA=PREMYA/100;PREMYA=Math.round(PREMYA*100)/100;FIVE_TIMES=Math.round(FIVE_TIMES*100)/100;TEXT_ALERT=PREMYA+"\n"+TEXT_ALERT+" /100";if(FIVE_TIMES<PREMYA){PREMYA=FIVE_TIMES;TEXT_ALERT="Предельный уровень страховой премии :"+FIVE_TIMES+". Рассчитанная страховая премия :"+TEXT_ALERT;}} }$("#TEXT_ALERT").val(TEXT_ALERT);}function SelectRowFromWindow(rowId,cntOfField,deselect){    var arreyOfElement=[];    if(deselect==0){        var name='';        arreyOfElement[0]=rowId;        for (i=1;i <=cntOfField;i++){            name=$("#rowid"+rowId+">td:nth-child("+i+")").html();            name=name.replace(/^\s+/,'');            name=name.replace(/\s+$/,'');            name=name.replace(/[" ' / \\]/g, "\$&");            arreyOfElement[i]=name;        }    }else{        arreyOfElement[0]='';        for (i=1;i <=cntOfField;i++){arreyOfElement[i]='';}    }     if($("#modalFrm",window.parent.document).is(':visible')){	for(var i=0;i<arreyOfElement.length;i++){	    e=$('#getFieldName'+(i+1),window.parent.document).val();	    if(e){ $('[name="'+e+'"]',window.parent.document).val(arreyOfElement[i]);}	}	fn=$("#callBFucnc",window.parent.document).val();	if(fn){window.parent[fn]();}	$("#modalMain",window.parent.document).hide();    }else{	window.returnValue=arreyOfElement;	window.close();    }}function SelectRowFromWindow2(rowId,hiddenFields,deselect){    var arreyOfElement=[];    if(deselect==0){         var name='';         arreyOfElement[0]=rowId;         for (i=0;i<hiddenFields.length;i++){             name=hiddenFields[i];             name=name.replace(/^\s+/,'');             name=name.replace(/\s+$/,'');             name=name.replace(/[" ' / \\]/g, "\$&");             arreyOfElement[i+1]=name;         }    }else{	arreyOfElement[0]='';        for (i=0;i <hiddenFields.length;i++){arreyOfElement[i+1]='';}    }    if($("#modalFrm",window.parent.document).is(':visible')){	for(var i=0;i<arreyOfElement.length;i++){	    e=$('#getFieldName'+(i+1),window.parent.document).val();	    if(e){ $('[name="'+e+'"]',window.parent.document).val(arreyOfElement[i]); }	}	fn=$("#callBFucnc",window.parent.document).val();	if(fn){window.parent[fn]();}	$("#modalMain",window.parent.document).hide();    }else{	window.returnValue=arreyOfElement;	window.close();    }}